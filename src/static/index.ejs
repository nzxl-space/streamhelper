<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>nzxl.space</title>
        <link rel="icon" type="image/svg+xml" href="/assets/logo.svg" sizes="any"> 
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="/assets/style.css">
    </head>
    <body>
        <noscript>Please enable JavaScript in order for this site to work.</noscript>
        <div class="preloader"></div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.34/dist/sweetalert2.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@5.0.12/dark.min.css">
        <script>
            $(window).on("load", () => {
                $(".preloader").fadeOut("slow");
                Swal.fire({
                    imageUrl: "/assets/logo.svg",
                    imageWidth: 140,
                    imageHeight: 50,
                    title: "Welcome!",
                    text: "We'll walk you through this step-by-step, so you can get started quickly. This will only take a few seconds.",
                    allowOutsideClick: false
                }).then(() => {
                    Swal.fire({
                        title: "Link your Discord",
                        text: "We need some of your info.. This is only used to gather osu! related data and your Twitch username.",
                        footer: "<img class='activities-gif' src='/assets/activities.gif'/><a class='yuneedthis'>Why is this needed?</a>",
                        confirmButtonText: "Authorize",
                        allowOutsideClick: false
                    }).then(() => {
                        var discordPopup = window.open("https://discord.com/api/oauth2/authorize?client_id=965596379533684747&redirect_uri=http%3A%2F%2Flocalhost%3A2048%2Fdiscord&response_type=code&scope=identify%20connections%20guilds.join", "popUpWindow", "height=750,width=500");
                        
                        Swal.fire({
                            title: 'Waiting for authorization..',
                            showConfirmButton: false,
                            allowOutsideClick: false,
                            didOpen: () => {
                                var checkPopup = setInterval(() => {
                                    if(discordPopup.closed) {
                                        clearInterval(checkPopup);
                                        Swal.fire({
                                            icon: "success",
                                            title: "Discord Linked",
                                            html: "Beatmap requests are now enabled.<br>Also did you know that there's also a !np command? ðŸ˜Ž",
                                            allowOutsideClick: false,
                                            showConfirmButton: false
                                        });
                                    }
                                }, 100);
                            }
                        });
                    });

                    $("a.yuneedthis").on("click", function(){
                        $("img.activities-gif").fadeToggle();
                    });
                });
            });
        </script>
    </body>
</html>